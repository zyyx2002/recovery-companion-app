{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"@/utils/useAuth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"HHge/F+kNWTBLu5mZhqDJclSs98=","exportNames":["*"]}},{"name":"@/utils/usePreventBack","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":56,"index":99}}],"key":"xz7DwicZ76B5gUVRLxA1ia0yYsg=","exportNames":["*"]}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":100},"end":{"line":3,"column":59,"index":159}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":160},"end":{"line":4,"column":44,"index":204}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"react-native-webview","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":205},"end":{"line":5,"column":47,"index":252}}],"key":"YJc7i/oIweCWhKjzjfYLEcLeUJA=","exportNames":["*"]}},{"name":"react-native-css-interop/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"/OtXpbGsN+xD0SELbqY71AxmSP8=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = MainComponent;\n  var _env2 = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _useAuth = require(_dependencyMap[1], \"@/utils/useAuth\");\n  var _usePreventBack = require(_dependencyMap[2], \"@/utils/usePreventBack\");\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _react = require(_dependencyMap[4], \"react\");\n  var _reactNativeWebview = require(_dependencyMap[5], \"react-native-webview\");\n  var _jsxRuntime = require(_dependencyMap[6], \"react-native-css-interop/jsx-runtime\");\n  var _jsxFileName = \"/home/user/apps/mobile/src/app/auth.jsx\",\n    _s = $RefreshSig$();\n  const callbackUrl = '/api/auth/token';\n  const callbackQueryString = `callbackUrl=${callbackUrl}`;\n  function MainComponent() {\n    _s();\n    const {\n      preventBack: rawPreventBack,\n      mode: rawMode = 'signup'\n    } = (0, _expoRouter.useLocalSearchParams)();\n    const preventBack = rawPreventBack ? JSON.parse(rawPreventBack) : false;\n    if (preventBack) {\n      (0, _usePreventBack.usePreventBack)();\n    }\n    const mode = rawMode === 'signin' ? 'signin' : 'signup';\n    const [currentURI, setURI] = (0, _react.useState)(`${_env2.env.EXPO_PUBLIC_BASE_URL}/account/${mode}?${callbackQueryString}`);\n    const {\n      isAuthenticated,\n      setAuth\n    } = (0, _useAuth.useAuth)();\n    (0, _react.useEffect)(() => {\n      if (isAuthenticated) {\n        _expoRouter.router.back();\n      }\n    }, [isAuthenticated]);\n    return (0, _jsxRuntime.jsx)(_reactNativeWebview.WebView, {\n      sharedCookiesEnabled: true,\n      source: {\n        uri: currentURI\n      },\n      onShouldStartLoadWithRequest: request => {\n        if (request.url === `${_env2.env.EXPO_PUBLIC_BASE_URL}${callbackUrl}`) {\n          fetch(request.url).then(async response => {\n            response.json().then(data => {\n              setAuth({\n                jwt: data.jwt,\n                user: data.user\n              });\n            });\n          });\n          return false;\n        }\n        if (request.url === currentURI) return true;\n\n        // Add query string properly by checking if URL already has parameters\n        const hasParams = request.url.includes('?');\n        const separator = hasParams ? '&' : '?';\n        const newURL = request.url.replaceAll(_env2.env.EXPO_PUBLIC_PROXY_BASE_URL, _env2.env.EXPO_PUBLIC_BASE_URL);\n        if (newURL.endsWith(callbackUrl)) {\n          setURI(newURL);\n          return false;\n        }\n        setURI(`${newURL}${separator}${callbackQueryString}`);\n        return false;\n      },\n      style: {\n        flex: 1\n      }\n    });\n  }\n  _s(MainComponent, \"I4ng36XS/TdyXmJtWc7fwhnrES8=\", false, function () {\n    return [_expoRouter.useLocalSearchParams, _usePreventBack.usePreventBack, _useAuth.useAuth];\n  });\n  _c = MainComponent;\n  var _c;\n  $RefreshReg$(_c, \"MainComponent\");\n});","lineCount":79,"map":[[7,2,1,0],[7,6,1,0,"_useAuth"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_usePreventBack"],[8,21,2,0],[8,24,2,0,"require"],[8,31,2,0],[8,32,2,0,"_dependencyMap"],[8,46,2,0],[9,2,3,0],[9,6,3,0,"_expoRouter"],[9,17,3,0],[9,20,3,0,"require"],[9,27,3,0],[9,28,3,0,"_dependencyMap"],[9,42,3,0],[10,2,4,0],[10,6,4,0,"_react"],[10,12,4,0],[10,15,4,0,"require"],[10,22,4,0],[10,23,4,0,"_dependencyMap"],[10,37,4,0],[11,2,5,0],[11,6,5,0,"_reactNativeWebview"],[11,25,5,0],[11,28,5,0,"require"],[11,35,5,0],[11,36,5,0,"_dependencyMap"],[11,50,5,0],[12,2,5,47],[12,6,5,47,"_jsxRuntime"],[12,17,5,47],[12,20,5,47,"require"],[12,27,5,47],[12,28,5,47,"_dependencyMap"],[12,42,5,47],[13,2,5,47],[13,6,5,47,"_jsxFileName"],[13,18,5,47],[14,4,5,47,"_s"],[14,6,5,47],[14,9,5,47,"$RefreshSig$"],[14,21,5,47],[15,2,7,0],[15,8,7,6,"callbackUrl"],[15,19,7,17],[15,22,7,20],[15,39,7,37],[16,2,8,0],[16,8,8,6,"callbackQueryString"],[16,27,8,25],[16,30,8,28],[16,45,8,43,"callbackUrl"],[16,56,8,54],[16,58,8,56],[17,2,10,15],[17,11,10,24,"MainComponent"],[17,24,10,37,"MainComponent"],[17,25,10,37],[17,27,10,40],[18,4,10,40,"_s"],[18,6,10,40],[19,4,11,1],[19,10,11,7],[20,6,11,9,"preventBack"],[20,17,11,20],[20,19,11,22,"rawPreventBack"],[20,33,11,36],[21,6,11,38,"mode"],[21,10,11,42],[21,12,11,44,"rawMode"],[21,19,11,51],[21,22,11,54],[22,4,11,63],[22,5,11,64],[22,8,12,2],[22,12,12,2,"useLocalSearchParams"],[22,44,12,22],[22,46,12,23],[22,47,12,24],[23,4,13,1],[23,10,13,7,"preventBack"],[23,21,13,18],[23,24,13,21,"rawPreventBack"],[23,38,13,35],[23,41,13,38,"JSON"],[23,45,13,42],[23,46,13,43,"parse"],[23,51,13,48],[23,52,13,49,"rawPreventBack"],[23,66,13,63],[23,67,13,64],[23,70,13,67],[23,75,13,72],[24,4,14,1],[24,8,14,5,"preventBack"],[24,19,14,16],[24,21,14,18],[25,6,15,2],[25,10,15,2,"usePreventBack"],[25,40,15,16],[25,42,15,17],[25,43,15,18],[26,4,16,1],[27,4,17,1],[27,10,17,7,"mode"],[27,14,17,11],[27,17,17,14,"rawMode"],[27,24,17,21],[27,29,17,26],[27,37,17,34],[27,40,17,37],[27,48,17,45],[27,51,17,48],[27,59,17,56],[28,4,19,1],[28,10,19,7],[28,11,19,8,"currentURI"],[28,21,19,18],[28,23,19,20,"setURI"],[28,29,19,26],[28,30,19,27],[28,33,19,30],[28,37,19,30,"useState"],[28,52,19,38],[28,54,20,2],[28,57,20,2,"_env2"],[28,62,20,2],[28,63,20,2,"env"],[28,66,20,2],[28,67,20,2,"EXPO_PUBLIC_BASE_URL"],[28,87,20,2],[28,99,20,49,"mode"],[28,103,20,53],[28,107,20,57,"callbackQueryString"],[28,126,20,76],[28,128,21,1],[28,129,21,2],[29,4,22,1],[29,10,22,7],[30,6,22,9,"isAuthenticated"],[30,21,22,24],[31,6,22,26,"setAuth"],[32,4,22,34],[32,5,22,35],[32,8,22,38],[32,12,22,38,"useAuth"],[32,28,22,45],[32,30,22,46],[32,31,22,47],[33,4,23,1],[33,8,23,1,"useEffect"],[33,24,23,10],[33,26,23,11],[33,32,23,17],[34,6,24,2],[34,10,24,6,"isAuthenticated"],[34,25,24,21],[34,27,24,23],[35,8,25,3,"router"],[35,26,25,9],[35,27,25,10,"back"],[35,31,25,14],[35,32,25,15],[35,33,25,16],[36,6,26,2],[37,4,27,1],[37,5,27,2],[37,7,27,4],[37,8,27,5,"isAuthenticated"],[37,23,27,20],[37,24,27,21],[37,25,27,22],[38,4,29,1],[38,11,30,2],[38,15,30,2,"_jsxRuntime"],[38,26,30,2],[38,27,30,2,"jsx"],[38,30,30,2],[38,32,30,3,"_reactNativeWebview"],[38,51,30,3],[38,52,30,3,"WebView"],[38,59,30,10],[39,6,31,3,"sharedCookiesEnabled"],[39,26,31,23],[40,6,32,3,"source"],[40,12,32,9],[40,14,32,11],[41,8,33,4,"uri"],[41,11,33,7],[41,13,33,9,"currentURI"],[42,6,34,3],[42,7,34,5],[43,6,35,3,"onShouldStartLoadWithRequest"],[43,34,35,31],[43,36,35,34,"request"],[43,43,35,41],[43,47,35,46],[44,8,36,4],[44,12,37,5,"request"],[44,19,37,12],[44,20,37,13,"url"],[44,23,37,16],[44,28,37,21],[44,31,37,21,"_env2"],[44,36,37,21],[44,37,37,21,"env"],[44,40,37,21],[44,41,37,21,"EXPO_PUBLIC_BASE_URL"],[44,61,37,21],[44,64,37,59,"callbackUrl"],[44,75,37,70],[44,77,37,72],[44,79,38,6],[45,10,39,5,"fetch"],[45,15,39,10],[45,16,39,11,"request"],[45,23,39,18],[45,24,39,19,"url"],[45,27,39,22],[45,28,39,23],[45,29,39,24,"then"],[45,33,39,28],[45,34,39,29],[45,40,39,36,"response"],[45,48,39,44],[45,52,39,49],[46,12,40,6,"response"],[46,20,40,14],[46,21,40,15,"json"],[46,25,40,19],[46,26,40,20],[46,27,40,21],[46,28,40,22,"then"],[46,32,40,26],[46,33,40,28,"data"],[46,37,40,32],[46,41,40,37],[47,14,41,7,"setAuth"],[47,21,41,14],[47,22,41,15],[48,16,41,17,"jwt"],[48,19,41,20],[48,21,41,22,"data"],[48,25,41,26],[48,26,41,27,"jwt"],[48,29,41,30],[49,16,41,32,"user"],[49,20,41,36],[49,22,41,38,"data"],[49,26,41,42],[49,27,41,43,"user"],[50,14,41,48],[50,15,41,49],[50,16,41,50],[51,12,42,6],[51,13,42,7],[51,14,42,8],[52,10,43,5],[52,11,43,6],[52,12,43,7],[53,10,44,5],[53,17,44,12],[53,22,44,17],[54,8,45,4],[55,8,46,4],[55,12,46,8,"request"],[55,19,46,15],[55,20,46,16,"url"],[55,23,46,19],[55,28,46,24,"currentURI"],[55,38,46,34],[55,40,46,36],[55,47,46,43],[55,51,46,47],[57,8,48,4],[58,8,49,4],[58,14,49,10,"hasParams"],[58,23,49,19],[58,26,49,22,"request"],[58,33,49,29],[58,34,49,30,"url"],[58,37,49,33],[58,38,49,34,"includes"],[58,46,49,42],[58,47,49,43],[58,50,49,46],[58,51,49,47],[59,8,50,4],[59,14,50,10,"separator"],[59,23,50,19],[59,26,50,22,"hasParams"],[59,35,50,31],[59,38,50,34],[59,41,50,37],[59,44,50,40],[59,47,50,43],[60,8,51,4],[60,14,51,10,"newURL"],[60,20,51,16],[60,23,51,19,"request"],[60,30,51,26],[60,31,51,27,"url"],[60,34,51,30],[60,35,51,31,"replaceAll"],[60,45,51,41],[60,46,51,41,"_env2"],[60,51,51,41],[60,52,51,41,"env"],[60,55,51,41],[60,56,51,41,"EXPO_PUBLIC_PROXY_BASE_URL"],[60,82,51,41],[60,84,51,41,"_env2"],[60,89,51,41],[60,90,51,41,"env"],[60,93,51,41],[60,94,51,41,"EXPO_PUBLIC_BASE_URL"],[60,114,54,4],[60,115,54,5],[61,8,55,4],[61,12,55,8,"newURL"],[61,18,55,14],[61,19,55,15,"endsWith"],[61,27,55,23],[61,28,55,24,"callbackUrl"],[61,39,55,35],[61,40,55,36],[61,42,55,38],[62,10,56,5,"setURI"],[62,16,56,11],[62,17,56,12,"newURL"],[62,23,56,18],[62,24,56,19],[63,10,57,5],[63,17,57,12],[63,22,57,17],[64,8,58,4],[65,8,59,4,"setURI"],[65,14,59,10],[65,15,59,11],[65,18,59,14,"newURL"],[65,24,59,20],[65,27,59,23,"separator"],[65,36,59,32],[65,39,59,35,"callbackQueryString"],[65,58,59,54],[65,60,59,56],[65,61,59,57],[66,8,60,4],[66,15,60,11],[66,20,60,16],[67,6,61,3],[67,7,61,5],[68,6,62,3,"style"],[68,11,62,8],[68,13,62,10],[69,8,62,12,"flex"],[69,12,62,16],[69,14,62,18],[70,6,62,20],[71,4,62,22],[71,5,63,3],[71,6,63,4],[72,2,65,0],[73,2,65,1,"_s"],[73,4,65,1],[73,5,10,24,"MainComponent"],[73,18,10,37],[74,4,10,37],[74,12,12,2,"useLocalSearchParams"],[74,44,12,22],[74,46,15,2,"usePreventBack"],[74,76,15,16],[74,78,22,38,"useAuth"],[74,94,22,45],[75,2,22,45],[76,2,22,45,"_c"],[76,4,22,45],[76,7,10,24,"MainComponent"],[76,20,10,37],[77,2,10,37],[77,6,10,37,"_c"],[77,8,10,37],[78,2,10,37,"$RefreshReg$"],[78,14,10,37],[78,15,10,37,"_c"],[78,17,10,37],[79,0,10,37],[79,3]],"functionMap":{"names":["<global>","MainComponent","useEffect$argument_0","WebView.props.onShouldStartLoadWithRequest","fetch.then$argument_0","response.json.then$argument_0"],"mappings":"AAA;eCS;WCa;EDI;iCEQ;6BCI;2BCC;ODE;MDC;IFkB;CDI"}},"type":"js/module"}]}