{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.observable = observable;\n  exports.cleanupEffect = cleanupEffect;\n  function observable(value, {\n    fallback,\n    name\n  } = {}) {\n    const effects = new Set();\n    return {\n      name,\n      get(effect) {\n        if (effect) {\n          effects.add(effect);\n          effect.dependencies.add(() => effects.delete(effect));\n        }\n        return value ?? fallback?.get(effect);\n      },\n      set(newValue) {\n        if (Object.is(newValue, value)) return;\n        value = newValue;\n        for (const effect of Array.from(effects)) {\n          effect.run();\n        }\n      }\n    };\n  }\n  function cleanupEffect(effect) {\n    for (const dep of Array.from(effect.dependencies)) {\n      dep();\n    }\n    effect.dependencies.clear();\n  }\n});","lineCount":38,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"observable"],[7,20,3,18],[7,23,3,21,"observable"],[7,33,3,31],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"cleanupEffect"],[8,23,4,21],[8,26,4,24,"cleanupEffect"],[8,39,4,37],[9,2,5,0],[9,11,5,9,"observable"],[9,21,5,19,"observable"],[9,22,5,20,"value"],[9,27,5,25],[9,29,5,27],[10,4,5,29,"fallback"],[10,12,5,37],[11,4,5,39,"name"],[12,2,5,44],[12,3,5,45],[12,6,5,48],[12,7,5,49],[12,8,5,50],[12,10,5,52],[13,4,6,4],[13,10,6,10,"effects"],[13,17,6,17],[13,20,6,20],[13,24,6,24,"Set"],[13,27,6,27],[13,28,6,28],[13,29,6,29],[14,4,7,4],[14,11,7,11],[15,6,8,8,"name"],[15,10,8,12],[16,6,9,8,"get"],[16,9,9,11,"get"],[16,10,9,12,"effect"],[16,16,9,18],[16,18,9,20],[17,8,10,12],[17,12,10,16,"effect"],[17,18,10,22],[17,20,10,24],[18,10,11,16,"effects"],[18,17,11,23],[18,18,11,24,"add"],[18,21,11,27],[18,22,11,28,"effect"],[18,28,11,34],[18,29,11,35],[19,10,12,16,"effect"],[19,16,12,22],[19,17,12,23,"dependencies"],[19,29,12,35],[19,30,12,36,"add"],[19,33,12,39],[19,34,12,40],[19,40,12,46,"effects"],[19,47,12,53],[19,48,12,54,"delete"],[19,54,12,60],[19,55,12,61,"effect"],[19,61,12,67],[19,62,12,68],[19,63,12,69],[20,8,13,12],[21,8,14,12],[21,15,14,19,"value"],[21,20,14,24],[21,24,14,28,"fallback"],[21,32,14,36],[21,34,14,38,"get"],[21,37,14,41],[21,38,14,42,"effect"],[21,44,14,48],[21,45,14,49],[22,6,15,8],[22,7,15,9],[23,6,16,8,"set"],[23,9,16,11,"set"],[23,10,16,12,"newValue"],[23,18,16,20],[23,20,16,22],[24,8,17,12],[24,12,17,16,"Object"],[24,18,17,22],[24,19,17,23,"is"],[24,21,17,25],[24,22,17,26,"newValue"],[24,30,17,34],[24,32,17,36,"value"],[24,37,17,41],[24,38,17,42],[24,40,18,16],[25,8,19,12,"value"],[25,13,19,17],[25,16,19,20,"newValue"],[25,24,19,28],[26,8,20,12],[26,13,20,17],[26,19,20,23,"effect"],[26,25,20,29],[26,29,20,33,"Array"],[26,34,20,38],[26,35,20,39,"from"],[26,39,20,43],[26,40,20,44,"effects"],[26,47,20,51],[26,48,20,52],[26,50,20,54],[27,10,21,16,"effect"],[27,16,21,22],[27,17,21,23,"run"],[27,20,21,26],[27,21,21,27],[27,22,21,28],[28,8,22,12],[29,6,23,8],[30,4,24,4],[30,5,24,5],[31,2,25,0],[32,2,26,0],[32,11,26,9,"cleanupEffect"],[32,24,26,22,"cleanupEffect"],[32,25,26,23,"effect"],[32,31,26,29],[32,33,26,31],[33,4,27,4],[33,9,27,9],[33,15,27,15,"dep"],[33,18,27,18],[33,22,27,22,"Array"],[33,27,27,27],[33,28,27,28,"from"],[33,32,27,32],[33,33,27,33,"effect"],[33,39,27,39],[33,40,27,40,"dependencies"],[33,52,27,52],[33,53,27,53],[33,55,27,55],[34,6,28,8,"dep"],[34,9,28,11],[34,10,28,12],[34,11,28,13],[35,4,29,4],[36,4,30,4,"effect"],[36,10,30,10],[36,11,30,11,"dependencies"],[36,23,30,23],[36,24,30,24,"clear"],[36,29,30,29],[36,30,30,30],[36,31,30,31],[37,2,31,0],[38,0,31,1],[38,3]],"functionMap":{"names":["<global>","observable","get","effect.dependencies.add$argument_0","set","cleanupEffect"],"mappings":"AAA;ACI;QCI;wCCG,4BD;SDG;QGC;SHO;CDE;AKC;CLK"}},"type":"js/module"}]}